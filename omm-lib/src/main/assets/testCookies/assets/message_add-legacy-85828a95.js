System.register(["./index-legacy-18636006.js"],(function(e,a){"use strict";var l,u,t,n,o,d,i,r,m,s,p,v,c,f,b,g,h,V;return{setters:[e=>{l=e.d,u=e.a,t=e.r,n=e.V,o=e.f,d=e.o,i=e.l,r=e.z,m=e.h,s=e.Z,p=e.j,v=e.a_,c=e.a3,f=e.R,b=e.a5,g=e.a1,h=e.a$,V=e.H}],execute:function(){const a={class:"page"},y={style:{margin:"16px"}};e("default",l({__name:"message_add",setup(e){u();const l=t(""),_=t({fabushijian:n().format("YYYY-MM-DD HH:mm:ss")}),z=e=>{v(_.value).then((e=>{0!=Object.keys(e).length?(l.value=e.id,c("保存成功"),f.back()):b("保存失败")}))},x=e=>{if(l.value)V("请先发布通知后再添加附件");else{const a=new FormData;a.append("filezjhc",e.file),g("/notice/uploadnotice",a).then((a=>{h({bianhaoid:l.value,guishu:"tz",name:e.file.name,realname:a}).then((e=>{e&&c("附件上传成功")}))}))}};return(e,l)=>{const u=o("van-field"),t=o("van-cell-group"),n=o("van-button"),v=o("van-uploader"),c=o("van-form");return d(),i("div",a,[r(c,{onSubmit:z},{default:m((()=>[r(t,{inset:"",style:{"margin-top":"10px"}},{default:m((()=>[r(u,{modelValue:_.value.biaoti,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value.biaoti=e),name:"发布标题",label:"发布标题",placeholder:"请输入发布标题",rules:[{required:!0,message:"请填写发布标题"}]},null,8,["modelValue"]),r(u,{modelValue:_.value.bumen,"onUpdate:modelValue":l[1]||(l[1]=e=>_.value.bumen=e),name:"发布部门",label:"发布部门",placeholder:"请输入发布部门",rules:[{required:!0,message:"请填写发布部门"}]},null,8,["modelValue"]),r(u,{modelValue:_.value.zuozhe,"onUpdate:modelValue":l[2]||(l[2]=e=>_.value.zuozhe=e),name:"发布作者",label:"发布作者",placeholder:"发布作者",rules:[{required:!0,message:"请填写发布作者"}]},null,8,["modelValue"])])),_:1}),r(t,{inset:"",style:{"margin-top":"10px"}},{default:m((()=>[r(u,{modelValue:_.value.neirong,"onUpdate:modelValue":l[3]||(l[3]=e=>_.value.neirong=e),rows:"6",autosize:"",label:"发布内容",type:"textarea","label-align":"top",placeholder:"请输入内容","show-word-limit":""},null,8,["modelValue"])])),_:1}),r(t,{inset:"",style:{"margin-top":"10px"}},{default:m((()=>[r(u,{modelValue:_.value.upload,"onUpdate:modelValue":l[4]||(l[4]=e=>_.value.upload=e),label:"添加附件"},{input:m((()=>[r(v,{"after-read":x},{default:m((()=>[r(n,{icon:"plus",type:"primary"},{default:m((()=>[s("上传文件")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),p("div",y,[r(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:m((()=>[s(" 提交 ")])),_:1})])])),_:1})])}}}))}}}));
