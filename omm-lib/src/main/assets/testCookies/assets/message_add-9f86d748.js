import{d as V,a as g,r as i,V as h,f as u,o as y,l as x,z as a,h as t,Z as p,j as z,a_ as w,a3 as v,R as k,a5 as D,a1 as U,a$ as j,H}from"./index-24b7b5a4.js";const N={class:"page"},T={style:{margin:"16px"}},B=V({__name:"message_add",setup(Y){g();const r=i(""),l=i({fabushijian:h().format("YYYY-MM-DD HH:mm:ss")}),f=d=>{w(l.value).then(e=>{Object.keys(e).length!=0?(r.value=e.id,v("保存成功"),k.back()):D("保存失败")})},_=d=>{if(r.value)H("请先发布通知后再添加附件");else{const e=new FormData;e.append("filezjhc",d.file),U("/notice/uploadnotice",e).then(n=>{j({bianhaoid:r.value,guishu:"tz",name:d.file.name,realname:n}).then(s=>{s&&v("附件上传成功")})})}};return(d,e)=>{const n=u("van-field"),s=u("van-cell-group"),m=u("van-button"),c=u("van-uploader"),b=u("van-form");return y(),x("div",N,[a(b,{onSubmit:f},{default:t(()=>[a(s,{inset:"",style:{"margin-top":"10px"}},{default:t(()=>[a(n,{modelValue:l.value.biaoti,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.biaoti=o),name:"发布标题",label:"发布标题",placeholder:"请输入发布标题",rules:[{required:!0,message:"请填写发布标题"}]},null,8,["modelValue"]),a(n,{modelValue:l.value.bumen,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.bumen=o),name:"发布部门",label:"发布部门",placeholder:"请输入发布部门",rules:[{required:!0,message:"请填写发布部门"}]},null,8,["modelValue"]),a(n,{modelValue:l.value.zuozhe,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.zuozhe=o),name:"发布作者",label:"发布作者",placeholder:"发布作者",rules:[{required:!0,message:"请填写发布作者"}]},null,8,["modelValue"])]),_:1}),a(s,{inset:"",style:{"margin-top":"10px"}},{default:t(()=>[a(n,{modelValue:l.value.neirong,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.neirong=o),rows:"6",autosize:"",label:"发布内容",type:"textarea","label-align":"top",placeholder:"请输入内容","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(s,{inset:"",style:{"margin-top":"10px"}},{default:t(()=>[a(n,{modelValue:l.value.upload,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.upload=o),label:"添加附件"},{input:t(()=>[a(c,{"after-read":_},{default:t(()=>[a(m,{icon:"plus",type:"primary"},{default:t(()=>[p("上传文件")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),z("div",T,[a(m,{round:"",block:"",type:"primary","native-type":"submit"},{default:t(()=>[p(" 提交 ")]),_:1})])]),_:1})])}}});export{B as default};
