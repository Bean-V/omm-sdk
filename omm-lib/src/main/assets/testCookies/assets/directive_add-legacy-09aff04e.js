System.register(["./moment-legacy-ef660780.js","./index-legacy-18636006.js","./useCheck-legacy-b49d56c8.js"],(function(e,a){"use strict";var l,t,n,o,u,d,i,r,s,c,m,h,p,v,f,g,b,x,V,y,w;return{setters:[e=>{l=e.m},e=>{t=e.d,n=e.a,o=e.u,u=e.J,d=e.r,i=e.$,r=e.f,s=e.o,c=e.l,m=e.z,h=e.h,p=e.W,v=e.a0,f=e.j,g=e.Z,b=e.Q,x=e.a1,V=e.a2,y=e._},e=>{w=e.u}],execute:function(){var a=document.createElement("style");a.textContent="[data-v-b8f158fb] .van-action-bar{bottom:50px}.van-action-bar-icon[data-v-b8f158fb]{width:20%}\n",document.head.appendChild(a);const j={style:{padding:"5px 16px",display:"flex","justify-content":"space-around"}};e("default",y(t({__name:"directive_add",setup(e){n(),o();const a=u(),{loading:t,addDirective:y,addDirectiveHC:_,fromData:z}=w();z.value.xsbh=l().format("YYYYMMDDHHmmss")+Math.floor(1e3+9999*Math.random()),z.value.xiafabum=a.userInfo.depname,z.value.xifajgdm=a.userInfo.depcode,z.value.xiafaren=a.userInfo.name,z.value.xiafarensfz=a.userInfo.idcard;const q=d(),D=d([]);d(!1);const U=[{text:"情指",value:"00"},{text:"国保",value:"01"},{text:"治安",value:"03"},{text:"刑侦",value:"05"}],Y=[{text:"一般",value:"一般"},{text:"加急",value:"加急"},{text:"紧急",value:"紧急"},{text:"特急",value:"特急"}],C=d({});function M(){b({title:"提示",message:"是否下发该条指令?"}).then((()=>{z.value.wanchengshixian=l().format("YYYY-MM-DD HH:mm:ss");const e=[],a=[];q.value&&q.value&&e.push({...z.value,shifouzhuban:"主办",hechadanw:q.value.text,hechadanweidm:q.value.value});const n=D.value.filter((e=>e.value));n.length>0&&n.forEach((a=>{e.push({...z.value,shifouzhuban:"协办",hechadanw:a.text,hechadanweidm:a.value})})),console.log("xb",n),console.log("d",e),a.push(y()),e.forEach((e=>{a.push(_(e))})),console.log("p",a),t.value=!0,Promise.all(a).then((e=>{console.log("E",e)})).catch((e=>{console.error("提交失败",e)})).finally((()=>{t.value=!1}))})).catch((()=>{}))}function k(){}i({leibie:"cjleibie"}).then((e=>{const a=e[0].map(((e,a)=>e={text:e,value:e}));C.value=a}));const H=e=>{const a=new FormData;a.append("file",e.file),x("/gather/upload",a).then((a=>{V({bianhao:z.value.xsbh,wenjian:e.file.name,path:a}).then((e=>{e&&showSuccessToast("附件上传成功")}))}))};return(e,a)=>{const l=r("FieldAndSelect"),n=r("van-field"),o=r("van-cell-group"),u=r("DateTimePicker"),d=r("OrgCascader"),i=r("OrgCascaderMultiple"),b=r("van-uploader"),x=r("van-button"),V=r("van-form"),y=r("van-skeleton");return s(),c("div",null,[m(y,{loading:p(t),animate:!1},{default:h((()=>[m(V,{onSubmit:k},{default:h((()=>[m(o,{inset:"",style:{"margin-top":"20px"}},{default:h((()=>[m(l,{modelValue:p(z).biaoti,"onUpdate:modelValue":a[0]||(a[0]=e=>p(z).biaoti=e),label:"标题",placeholder:"请输入内容",required:"",options:C.value,loading:!1},null,8,["modelValue","options"]),m(n,{modelValue:p(z).zhilingyaoq,"onUpdate:modelValue":a[1]||(a[1]=e=>p(z).zhilingyaoq=e),"label-align":"top",rows:"5",autosize:"",label:"核查要求",type:"textarea",maxlength:"500",required:"",placeholder:"请输入内容","show-word-limit":""},null,8,["modelValue"])])),_:1}),m(o,{inset:"",style:{"margin-top":"20px"}},{default:h((()=>[m(u,{modelValue:p(z).wanchengshixian,"onUpdate:modelValue":a[2]||(a[2]=e=>p(z).wanchengshixian=e),required:"",label:"核查时限",placeholder:"请点击选择"},null,8,["modelValue"]),m(v,{modelValue:p(z).jingjizhuangtai,"onUpdate:modelValue":a[3]||(a[3]=e=>p(z).jingjizhuangtai=e),options:Y,required:"",label:"紧急状态",placeholder:"请点击选择"},null,8,["modelValue"]),m(v,{modelValue:p(z).ywjzdm,"onUpdate:modelValue":a[4]||(a[4]=e=>p(z).ywjzdm=e),options:U,required:"",label:"业务警种",placeholder:"请点击选择"},null,8,["modelValue"]),m(d,{modelValue:q.value,"onUpdate:modelValue":a[5]||(a[5]=e=>q.value=e),"is-link":"",required:"",label:"主办单位",placeholder:"请点击选择"},null,8,["modelValue"])])),_:1}),m(o,{inset:"",title:"协办单位"},{default:h((()=>[m(i,{modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=e=>D.value=e),required:"",label:"协办单位",placeholder:"请点击选择"},null,8,["modelValue"])])),_:1}),m(o,{inset:"",title:"附件上传"},{default:h((()=>[m(n,{name:"uploader","label-align":"top"},{input:h((()=>[m(b,{modelValue:p(z).file,"onUpdate:modelValue":a[7]||(a[7]=e=>p(z).file=e),"after-read":H},null,8,["modelValue"])])),_:1})])),_:1}),f("div",j,[m(x,{type:"primary",block:"",onClick:M},{default:h((()=>[g(" 指令发送 ")])),_:1})])])),_:1})])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-b8f158fb"]]))}}}));
