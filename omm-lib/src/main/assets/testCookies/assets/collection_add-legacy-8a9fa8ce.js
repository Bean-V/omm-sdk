System.register(["./index-legacy-18636006.js"],(function(e,l){"use strict";var a,u,t,i,d,n,s,o,r,v,m,c,h,p,b,g,x,f,j,y,z,V,q,w,_;return{setters:[e=>{a=e.d,u=e.a,t=e.J,i=e.r,d=e.V,n=e.$,s=e.C,o=e.f,r=e.o,v=e.g,m=e.h,c=e.z,h=e.a0,p=e.j,b=e.Z,g=e.a1,x=e.a2,f=e.a3,j=e.P,y=e.Q,z=e.a4,V=e.a5,q=e.a6,w=e.a7,_=e.R}],execute:function(){const l={style:{padding:"5px 16px",display:"flex","justify-content":"space-around"}};e("default",a({__name:"collection_add",setup(e){const a=u(),U=t(),Y=i(!1),k=i({xsbh:d().format("YYYYMMDDHHmmss")+Math.floor(1e3+9999*Math.random()),biaoti:"",leixing:"",neirong:"",shejidiqu:"",laiyuan:"",caijidanwei:U.userInfo.depname,caijiren:U.userInfo.name,caijishijian:d().format("YYYY-MM-DD HH:mm:ss"),zhuyaorenyuan:"",sfz:"",sfzhm:U.userInfo.idcard,zzjgdm:U.userInfo.depcode,ywjzdm:"",sfsb:null,hechadanweidm:"1",zphone:U.userInfo.phone,mingzu:"",fenlei:"",dh:""}),D=[{text:"情指",value:"00"},{text:"国保",value:"01"},{text:"治安",value:"03"},{text:"刑侦",value:"05"}],M=i({}),I=i([]),H=[{text:"阿图什",value:"阿图什"},{text:"阿克陶",value:"阿克陶"},{text:"乌恰",value:"乌恰"},{text:"阿合奇",value:"阿合奇"},{text:"南疆四地州",value:"南疆四地州"},{text:"新疆",value:"新疆"},{text:"内地",value:"内地"},{text:"国外",value:"国外"}],C=[{text:"工作掌握",value:"工作掌握"},{text:"密悉掌握",value:"密悉掌握"},{text:"人力情报",value:"人力情报"},{text:"技术情报",value:"技术情报"},{text:"群众举报",value:"群众举报"},{text:"末梢信息",value:"末梢信息"},{text:"审讯深挖",value:"审讯深挖"},{text:"异地推送",value:"异地推送"},{text:"上级通报",value:"上级通报"}],S=[{text:"舆情",value:"舆情"},{text:"敌情",value:"敌情"},{text:"社情",value:"社情"},{text:"教情",value:"教情"}];n({leibie:"cjleibie"}).then((e=>{const l=e[0].map(((e,l)=>e={text:e,value:e}));M.value=l,I.value.push(l)}));const O=e=>{const l=new FormData;l.append("file",e.file),g("/gather/upload",l).then((l=>{console.log("path:",l),x({bianhao:k.value.xsbh,wenjian:e.file.name,path:l}).then((e=>{e&&f("附件上传成功")}))}))},P=()=>{"653000000000"!==!k.value.zzjgdm?y({title:"提示",message:"是否保存"}).then((()=>{k.value.sfsb=!1,z(k.value).then((e=>{0!=Object.keys(e).length?(f("保存成功"),Y.value=!0):403==e.statusCode?j("无权限操作"):V("保存失败")}))})).catch((()=>{})):j({message:"您无需上报"})},F=()=>{"653000000000"!==!k.value.zzjgdm?null!=k.value.sfsb?y({title:"提示",message:"是否上报"}).then((()=>{k.value.sfsb=!0,q(k.value.xsbh).then((e=>{if(e)V("上报失败");else{const e={bianhao:k.value.xsbh,biaoti:k.value.biaoti,ywjzdm:k.value.ywjzdm,sbzzjgdm:k.value.zzjgdm,sfzhmsbr:k.value.caijiren,sbzzjgmc:k.value.caijidanwei,dh:""};w(e).then((e=>{f("上报成功"),_.back()}))}}))})).catch((()=>{})):j({message:"请先保存后再上报"}):j({message:"您无需上报"})};return s((()=>{const e=a.query;e&&Object.keys(e).length>0&&(k.value={},k.value=a.query,k.value.neirong=a.query.neirong1)})),(e,a)=>{const u=o("DateTimePicker"),t=o("van-cell-group"),i=o("van-uploader"),d=o("van-field"),n=o("van-button"),s=o("van-form");return r(),v(s,{onSubmit:P,disabled:Y.value},{default:m((()=>[c(t,{inset:"",title:"基本信息"},{default:m((()=>[c(h,{modelValue:k.value.ywjzdm,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.ywjzdm=e),options:D,label:"业务警种",required:"",disabled:Y.value,placeholder:"请点击选择",rules:[{required:!0,message:"请选择内容"}]},null,8,["modelValue","disabled"]),c(h,{modelValue:k.value.leixing,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.leixing=e),options:I.value,label:"采集类型",required:"",disabled:Y.value,placeholder:"请点击选择",rules:[{required:!0,message:"请选择内容"}]},null,8,["modelValue","options","disabled"]),c(h,{modelValue:k.value.shejidiqu,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.shejidiqu=e),options:H,label:"涉及地区",required:"",disabled:Y.value,placeholder:"请点击选择",rules:[{required:!0,message:"请选择内容"}]},null,8,["modelValue","disabled"]),c(h,{modelValue:k.value.laiyuan,"onUpdate:modelValue":a[3]||(a[3]=e=>k.value.laiyuan=e),options:C,label:"信息来源",required:"",disabled:Y.value,placeholder:"请点击选择",rules:[{required:!0,message:"请选择内容"}]},null,8,["modelValue","disabled"]),c(h,{modelValue:k.value.siqing,"onUpdate:modelValue":a[4]||(a[4]=e=>k.value.siqing=e),options:S,label:"四情",required:"",disabled:Y.value,placeholder:"请点击选择",rules:[{required:!0,message:"请选择内容"}]},null,8,["modelValue","disabled"]),c(u,{modelValue:k.value.caijishijian,"onUpdate:modelValue":a[5]||(a[5]=e=>k.value.caijishijian=e),label:"采集时间",placeholder:"请点击选择",disabled:Y.value},null,8,["modelValue","disabled"])])),_:1}),c(t,{inset:"",title:"附件上传"},{default:m((()=>[c(d,{name:"uploader","label-align":"top"},{input:m((()=>[c(i,{modelValue:k.value.file,"onUpdate:modelValue":a[6]||(a[6]=e=>k.value.file=e),"after-read":O},null,8,["modelValue"])])),_:1})])),_:1}),c(t,{inset:"",title:"信息详情"},{default:m((()=>[c(d,{modelValue:k.value.neirong,"onUpdate:modelValue":a[7]||(a[7]=e=>k.value.neirong=e),"label-align":"top",rows:"5",autosize:"",type:"textarea",required:"",placeholder:"请输入内容","show-word-limit":"",rules:[{required:!0,message:"请填写内容"}]},null,8,["modelValue"])])),_:1}),p("div",l,[c(n,{type:"success",block:"","native-type":"onSubmit",style:{width:"49%"}},{default:m((()=>[b(" 保存 ")])),_:1}),c(n,{type:"primary",block:"",onClick:F,style:{width:"49%"}},{default:m((()=>[b(" 上报 ")])),_:1})])])),_:1},8,["disabled"])}}}))}}}));
