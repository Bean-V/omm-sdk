/*!
 * 工具类：常用数据处理工具
 * Utils - v1.0.0 (2021/7/9, 11:07:14 AM)
 *
 */const o={titleCase(e){return e==null||e.length===0?e:e.replace(/^[a-z]/,t=>t.toLocaleUpperCase())},compressLetter(e,t){let r=new RegExp("([a-zA-Z])\\1+",t?"ig":"g");return e.replace(r,(n,l)=>n.length+l)},sleep(e){let t=new Date,r=t.getTime()+e;for(;;)if(t=new Date,t.getTime()>r)return},trim(e){return e.replace(/(^\s*)|(\s*$)/g,"")},trimAll(e){return e.replace(/\s+/g,"")},replaceAll(e,t,r){return e.replace(new RegExp(t,"gm"),r)},numberFormatter(e){return e.length===11?e.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"):e},moneyFormatter(e){return parseFloat(e).toFixed(2).toString().split("").reverse().join("").replace(/(\d{3})/g,"$1,").replace(/\,$/,"").split("").reverse().join("")},dateFormatter(e,t,r=1,n=!0){let l="";return r===3?l=o._formatTimeStr(e,t):l=o._formatDate(t,e,r,n),l},_formatDate(e,t,r=1,n){if(!t)return"";let l,a="ymdhis";r===4?l=t:(t=t.toString(),~t.indexOf(".")&&(t=t.substring(0,t.indexOf("."))),t=t.replace("T"," ").replace(/\-/g,"/"),e||(e="y-m-d h:i:s"),t?(r===2&&(t=n?Number(t):Number(t)*1e3),l=new Date(t)):l=new Date);let s=l.getMonth()+1,g=l.getDate(),m=l.getHours(),p=l.getMinutes(),i=l.getSeconds();s=s<10?"0"+s:s,g=g<10?"0"+g:g,m=m<10?"0"+m:m,p=p<10?"0"+p:p,i=i<10?"0"+i:i;let c=[l.getFullYear().toString(),s.toString(),g.toString(),m.toString(),p.toString(),i.toString()];for(let u=0;u<c.length;u++)e=e.replace(a.charAt(u),c[u]);return e},_formatTimeStr(e,t){if(e){if(e=e.toString(),e.length===14){let r=e.split(""),n="ymdhis";t||(t="y-m-d h:i:s");let l=[[...r].splice(0,4).join(""),[...r].splice(4,2).join(""),[...r].splice(6,2).join(""),[...r].splice(8,2).join(""),[...r].splice(10,2).join(""),[...r].splice(12,2).join("")];for(let a=0;a<l.length;a++)t=t.replace(n.charAt(a),l[a]);return t}return e}},rgbToHex(e,t,r){return"#"+o._toHex(e)+o._toHex(t)+o._toHex(r)},_toHex(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))},hexToRGB(e){if(e.length===4){let r=e.substring(1,4);e="#"+r+r}let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},unique(e){e=e||6;let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return"firstui_"+new Date().getTime()+t},getUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>(e==="x"?Math.random()*16|0:"r&0x3"|"0x8").toString(16))},distinctArray(e,t){return e=e||[],t=t||[],[...new Set([...e,...t])]},getDateTimeSlot(e){let t=new Date,r=t.toDateString(),n=t.toDateString();switch(e){case 1:r=`${r} 00:00:00`,n=`${n} 23:59:59`;break;case 2:t.setTime(t.getTime()-864e5),r=`${t.toDateString()} 00:00:00`,n=`${t.toDateString()} 23:59:59`;break;case 3:let l=t.getDay()||7;t.setDate(t.getDate()-l+1),r=`${t.toDateString()} 00:00:00`,n=`${n} 23:59:59`;break;case 4:r=`${t.getFullYear()}-${t.getMonth()+1}-01 00:00:00`,n=`${n} 23:59:59`;break;case 5:r=`${t.getFullYear()}-01-01 00:00:00`,n=`${n} 23:59:59`;break}return{start:new Date(r.replace(/\-/g,"/")),end:new Date(n.replace(/\-/g,"/"))}},getUrlParam(e){let t=e.split("?"),r={};return t.length>1&&(t=t[1].split("&"),t.forEach(n=>{n=n.split("="),r[n[0]]=n[1]})),r},debounce(e,t=1e3,r=!0){let n;return function(){let l=this,a=arguments;if(n&&clearTimeout(n),r){let s=!n;n=setTimeout(()=>{n=null},t),s&&e.apply(l,a)}else n=setTimeout(()=>{e.apply(l,a)},t)}},throttle(e,t=1e3,r=1){let n=0,l;return function(){let a=this,s=arguments;if(r===1){let g=Date.now();g-n>t&&(e.apply(a,s),n=g)}else r===2&&(l||(l=setTimeout(()=>{l=null,e.apply(a,s)},t)))}},formatTimeAgo(e,t=1,r=!0,n="前",l=6,a=10,s=!0){const g=o.dateFormatter(e,"y/m/d h:i:s",t,r),m=new Date(g).getTime(),p=new Date().getTime();let i="";const c=p-m;if(c>0){const h=Math.floor(c/31104e6),d=Math.floor(c/2592e6),y=Math.floor(c/864e5),b=Math.floor(c/36e5),A=Math.floor(c/6e4),M=Math.floor(c/1e3);let T=!1;switch(l){case 1:T=!!(A||b||y||d||h);break;case 2:T=!!(b||y||d||h);break;case 3:T=!!(y||d||h);break;case 4:T=!!(d||h);break;case 5:T=!!h;break}T||(h?i=`${h}年${n}`:d?i=`${d}个月${n}`:y?y===1&&s?i="昨天":y===2&&s?i="前天":i=`${y}天${n}`:b?i=`${b}小时${n}`:A?i=`${A}分钟${n}`:(a=a<60?a:59,i=M<a?"刚刚":`${M}秒${n}`))}return i},getRandomHexColor(){const e=["0","1","2","4","5","6","7","8","9","a","b","c","d","e","f"],t=Math.floor(Math.random()*e.length),r=Math.floor(Math.random()*e.length),n=Math.floor(Math.random()*e.length),l=Math.floor(Math.random()*e.length),a=Math.floor(Math.random()*e.length),s=Math.floor(Math.random()*e.length);return`#${e[t]+e[r]+e[n]+e[l]+e[a]+e[s]}`},convertCurrency(e){const t=o.trimAll(e.toString()).replace("￥","").replace(",","");if(t=="")return"";const r=parseFloat(t),n=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖"),l=new Array("","拾","佰","仟"),a=new Array("","万","亿","兆"),s=new Array("角","分","毫","厘"),g="整",m="元",p=1e15;let i="",c="",u="",$=[];if(r>=p)return"";if(r==0)return u=n[0]+m+g,u;if(t.indexOf(".")==-1?(i=t,c=""):($=t.split("."),i=$[0],c=$[1].substring(0,4)),parseInt(i,10)>0){let D=0,f=i.length;for(let x=0;x<f;x++){let h=i.substring(x,x+1),d=f-x-1,y=d/4,b=d%4;h=="0"?D++:(D>0&&(u+=n[0]),D=0,u+=n[parseInt(h)]+l[b]),b==0&&D<4&&(u+=a[y])}u+=m}if(c!=""){let D=c.length;for(let f=0;f<D;f++){let x=c.substring(f,f+1);x!="0"&&(u+=n[parseInt(x)]+s[f])}}return u==""?u+=n[0]+m+g:c==""&&(u+=g),u},removeTags(e){return e.replace(/<[^>]+>/g,"")}},w={titleCase:o.titleCase,compressLetter:o.compressLetter,sleep:o.sleep,trim:o.trim,trimAll:o.trimAll,replaceAll:o.replaceAll,numberFormatter:o.numberFormatter,moneyFormatter:o.moneyFormatter,dateFormatter:o.dateFormatter,rgbToHex:o.rgbToHex,hexToRGB:o.hexToRGB,unique:o.unique,distinctArray:o.distinctArray,getDateTimeSlot:o.getDateTimeSlot,getUrlParam:o.getUrlParam,getUUID:o.getUUID,debounce:o.debounce,throttle:o.throttle,formatTimeAgo:o.formatTimeAgo,getRandomHexColor:o.getRandomHexColor,convertCurrency:o.convertCurrency,removeTags:o.removeTags};export{w as u};
