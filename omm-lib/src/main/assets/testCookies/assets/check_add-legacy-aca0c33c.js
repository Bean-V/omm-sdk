System.register(["./moment-legacy-ef660780.js","./index-legacy-18636006.js","./useCheck-legacy-e0b6b843.js"],(function(e,a){"use strict";var l,u,t,o,n,i,d,r,h,s,m,c,v,p,f,g,b,x,V,y,q,z,_,U;return{setters:[e=>{l=e.m},e=>{u=e.d,t=e.a,o=e.u,n=e.J,i=e.r,d=e.ay,r=e.f,h=e.o,s=e.g,m=e.h,c=e.z,v=e.W,p=e.a0,f=e.j,g=e.Z,b=e.a1,x=e.a2,V=e.H,y=e.Q,q=e.aE,z=e.az,_=e.aF},e=>{U=e.d}],execute:function(){const a={style:{margin:"16px"}};e("default",u({__name:"check_add",setup(e){const u=t(),j=o(),w=n(),{fromData:k,run:D}=U();k.value.bianhao=u.query.bh,k.value.faqibumenjgdm=w.userInfo.depcode,k.value.faqibumen=w.userInfo.depname,k.value.faqiren=w.userInfo.name,k.value.faqirensfz=w.userInfo.idcard;const C=i(),I=i([]);i(!1);const Y=[{text:"情指",value:"00"},{text:"国保",value:"01"},{text:"治安",value:"03"},{text:"刑侦",value:"05"},{text:"网安",value:"11"},{text:"jz",value:"12"},{text:"监管",value:"13"},{text:"交警",value:"17"},{text:"其他",value:"99"}],E=[{text:"核查",value:"核查"},{text:"防范",value:"防范"},{text:"预警",value:"预警"},{text:"关注",value:"关注"}],H=[{text:"一般",value:"一般"},{text:"重要",value:"重要"},{text:"紧急",value:"紧急"}],M=i(!1);d((()=>{M.value?z({message:"提交中...",forbidClick:!0,duration:0}):_()}));const P=e=>{const a=new FormData;a.append("file",e.file),b("/gather/upload",a).then((a=>{x({bianhao:u.query.bh,wenjian:e.file.name,path:a}).then((e=>{e&&V("附件上传成功")}))}))};function F(){k.value.xiafashijian=l().format("YYYY-MM-DD HH:mm:ss");const e=[],a=[];C.value&&C.value&&e.push({...k.value,shifouzhuban:"主办",hechabumen:C.value.text,hechabumdm:C.value.value});const u=I.value.filter((e=>e.value));u.length>0&&u.forEach((a=>{e.push({...k.value,shifouzhuban:"协办",hechabumen:a.text,hechabumdm:a.value})})),console.log("xb",u),e.forEach((e=>{a.push(D(e))})),M.value=!0,Promise.all(a).then((e=>{y({message:"是否需要盯办？"}).then((()=>{q({db:"是",bianhao:k.value.bianhao}).then((e=>{console.log("返回列表",e),1===e?(V("该条信息已被盯办成功"),j.back()):V("盯办失败，请重新尝试")}))})).catch((()=>{j.back()}))})).catch((e=>{console.error("提交失败",e)})).finally((()=>{M.value=!1}))}return(e,l)=>{const u=r("van-field"),t=r("van-cell-group"),o=r("DateTimePicker"),n=r("OrgCascader"),i=r("OrgCascaderMultiple"),d=r("van-uploader"),b=r("van-switch"),x=r("van-button"),V=r("van-form");return h(),s(V,{onSubmit:F},{default:m((()=>[c(t,{inset:"",style:{"margin-top":"20px"}},{default:m((()=>[c(u,{modelValue:v(k).hechayaoqiu,"onUpdate:modelValue":l[0]||(l[0]=e=>v(k).hechayaoqiu=e),"label-align":"top",rows:"5",autosize:"",label:"核查要求",type:"textarea",required:"",placeholder:"请输入内容","show-word-limit":""},null,8,["modelValue"])])),_:1}),c(t,{inset:"",style:{"margin-top":"20px"}},{default:m((()=>[c(o,{modelValue:v(k).hechashixian,"onUpdate:modelValue":l[1]||(l[1]=e=>v(k).hechashixian=e),required:"",label:"核查时限",placeholder:"请点击选择"},null,8,["modelValue"]),c(p,{modelValue:v(k).yewujingzhong,"onUpdate:modelValue":l[2]||(l[2]=e=>v(k).yewujingzhong=e),options:Y,required:"",label:"业务警种",placeholder:"请点击选择"},null,8,["modelValue"]),c(n,{modelValue:C.value,"onUpdate:modelValue":l[3]||(l[3]=e=>C.value=e),"is-link":"",required:"",label:"主办单位",placeholder:"请点击选择"},null,8,["modelValue"])])),_:1}),c(t,{inset:"",title:"核查单位"},{default:m((()=>[c(i,{modelValue:I.value,"onUpdate:modelValue":l[4]||(l[4]=e=>I.value=e),required:"",label:"核查单位",placeholder:"请点击选择"},null,8,["modelValue"])])),_:1}),c(t,{inset:"",title:"附件上传"},{default:m((()=>[c(u,{name:"uploader","label-align":"top"},{input:m((()=>[c(d,{modelValue:v(k).file,"onUpdate:modelValue":l[5]||(l[5]=e=>v(k).file=e),"after-read":P},null,8,["modelValue"])])),_:1})])),_:1}),c(t,{inset:"",style:{"margin-top":"20px"}},{default:m((()=>[c(u,{name:"switch",label:"是否归档",required:""},{"right-icon":m((()=>[c(b,{modelValue:v(k).shifouguidang,"onUpdate:modelValue":l[6]||(l[6]=e=>v(k).shifouguidang=e)},null,8,["modelValue"])])),_:1}),c(u,{name:"switch",label:"是否采用",required:""},{"right-icon":m((()=>[c(b,{modelValue:v(k).shifoucaiyong,"onUpdate:modelValue":l[7]||(l[7]=e=>v(k).shifoucaiyong=e)},null,8,["modelValue"])])),_:1}),c(p,{modelValue:v(k).chizhileix,"onUpdate:modelValue":l[8]||(l[8]=e=>v(k).chizhileix=e),options:E,required:"",label:"处置类型",placeholder:"请点击选择"},null,8,["modelValue"]),c(p,{modelValue:v(k).hechazhuangtai,"onUpdate:modelValue":l[9]||(l[9]=e=>v(k).hechazhuangtai=e),options:H,required:"",label:"紧急状态",placeholder:"请点击选择"},null,8,["modelValue"])])),_:1}),f("div",a,[c(x,{block:"",type:"primary","native-type":"submit",loading:M.value},{default:m((()=>[g(" 提交 ")])),_:1},8,["loading"])])])),_:1})}}}))}}}));
