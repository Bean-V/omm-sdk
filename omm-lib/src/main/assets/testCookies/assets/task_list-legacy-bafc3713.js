System.register(["./index-legacy-18636006.js","./403-legacy-61c3fdc6.js"],(function(e,a){"use strict";var l,t,n,i,u,s,o,c,d,r,v,m,f,p,g,h,y,z,k,b,_,x,w,j,V,C,U,R,A,Y;return{setters:[e=>{l=e.d,t=e.r,n=e.J,i=e.T,u=e.e,s=e.C,o=e.x,c=e.ac,d=e.f,r=e.o,v=e.l,m=e.z,f=e.h,p=e.j,g=e.Z,h=e.W,y=e.F,z=e.D,k=e.n,b=e.aT,_=e.V,x=e.H,w=e.aU,j=e.p,V=e.k,C=e.g,U=e.t,R=e.R,A=e._},e=>{Y=e.E}],execute:function(){var D=document.createElement("style");D.textContent='@charset "UTF-8";.stamp[data-v-51171d7c]{position:absolute;top:0;right:50px;width:50px;height:50px;background-image:url('+new URL("tg-ea6dbc4b.png",a.meta.url).href+");background-size:cover;background-position:center;z-index:2}.cell_custom_title[data-v-51171d7c]{display:flex;justify-content:space-between;align-items:center}.custom-title[data-v-51171d7c]{margin-left:4px;vertical-align:middle}.search-icon[data-v-51171d7c]{font-size:16px;line-height:inherit}\n",document.head.appendChild(D);const H=e=>(j("data-v-51171d7c"),e=e(),V(),e),I={class:"page"},T={style:{padding:"5px 16px",display:"flex","justify-content":"space-around"}},E={key:0},F=H((()=>p("div",{style:{"text-align":"center",color:"var(--el-text-color-secondary)"}},"无权限访问！",-1))),L={key:1},M={key:0},S={key:0,class:"error-message"},q={key:1},J={key:0,class:"stamp"},P={class:"custom-title"},Q={class:"cell_custom_title"},W=H((()=>p("span",null,"下发单位",-1))),Z={class:"cell_custom_title"},B=H((()=>p("span",null,"接收单位",-1))),G={class:"cell_custom_title"},K=H((()=>p("span",null,"完成时限",-1))),N={key:0,slot:"finished"};e("default",A(l({name:"hcfk_check_list",__name:"task_list",setup(e){const a=t({}),l=t(null),j=n();t(0),t("b");const V=t(!1),A=t(!1),D=i({size:10,current:1,total:0}),H=u((()=>D.size*D.current-D.size)),O=t([]),X=t(!0),$=t(!1),ee=async()=>{D.size=10,D.current=1,D.total=0,A.value=!1,O.value=[],a.value?se():ae()};function ae(){V.value=!0,b({num:D.size,start:H.value,zzjgdm:j.userInfo.depcode}).then((e=>{if(A.value=!0,e.rows&&Array.isArray(e.rows)){const a=e.rows.map((e=>({id:e.id,bianhao:e.bianhao,biaoti:e.biaoti,sfwc:e.sfwc,sjy:e.sjy,wanchengshixian:_(e.wanchengshixian).format("YYYY-MM-DD HH:mm:ss"),xfbm:e.xfbm,xfbmdm:e.xfbmdm,xiafatime:e.xiafatime,zzjgdm:e.zzjgdm,zzjgmc:e.zzjgmc})));O.value.push(...a),D.current+=1,D.total=e.total,e.total<D.current*D.size&&(A.value=!0)}else 403==e.statusCode?l.value=e.statusCode:x("未查询到数据")})).catch((e=>{$.value=!0,A.value=!0})).finally((()=>{V.value=!1,X.value=!1}))}const le=()=>{a.value={}},te=e=>{D.size=10,D.current=1,D.total=0,A.value=!1,se()},ne=()=>{D.size=10,D.current=1,D.total=0,A.value=!1,se()},ie=t(null),ue=()=>{D.size=10,D.current=1,D.total=0,A.value=!1,ie.value.toggle(),se()},se=async()=>{let e=null;for(var l in a.value)"biaoti"==l&&a.value[l]?e=null==e?" biaoti like '%"+a.value[l]+"%'":e+" and biaoti like '%"+a.value[l]+"%'":"zzjgmc"==l&&a.value[l]?e=null==e?" zzjgmc like '%"+a.value[l]+"%'":e+" and zzjgmc like '%"+a.value[l]+"%'":"sfwc"==l&&a.value[l]&&(e=null==e?" sfwc = '"+(a.value[l]?"是":"否")+"'":e+" and sfwc = '"+(a.value[l]?"是":"否")+"'");const t={condition:e,zzjgdm:j.userInfo.depcode,num:10,start:0};null==e?(O.value=[],ae()):await new Promise((e=>{w(t).then((e=>{e.rows&&Array.isArray(e.rows)&&(O.value=e.rows,D.current+=1,D.total=e.total,e.total<D.current*D.size&&(A.value=!0))})).catch((e=>{$.value=!0,A.value=!0})).finally((()=>{V.value=!1,X.value=!1}))}))};return s((()=>{ae()})),o((()=>{console.log("页面注销")})),c((()=>{console.log("页面注销")})),(e,t)=>{const n=d("van-search"),i=d("van-field"),u=d("van-switch"),s=d("van-cell"),o=d("van-button"),c=d("van-dropdown-item"),b=d("van-dropdown-menu"),_=d("van-sticky"),x=d("van-empty"),w=d("van-skeleton"),j=d("van-tag"),D=d("van-cell-group"),H=d("van-divider"),se=d("van-list"),oe=d("van-pull-refresh"),ce=d("van-back-top");return r(),v("div",I,[m(_,null,{default:f((()=>[m(n,{modelValue:a.value.biaoti,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.biaoti=e),"show-action":"",label:"标题",placeholder:"请输入标题关键词",onSearch:te},{action:f((()=>[p("div",{onClick:ne},"搜索")])),_:1},8,["modelValue"]),m(b,{ref:"menuRef"},{default:f((()=>[m(c,{title:"筛选",ref_key:"itemRef",ref:ie},{default:f((()=>[m(i,{modelValue:a.value.zzjgmc,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.zzjgmc=e),label:"接收单位",placeholder:"请输入接收单位"},null,8,["modelValue"]),m(s,{center:"",title:"是否采完成"},{"right-icon":f((()=>[m(u,{modelValue:a.value.sfwc,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.sfwc=e)},null,8,["modelValue"])])),_:1}),p("div",T,[m(o,{type:"primary",block:"",onClick:le,style:{width:"49%"}},{default:f((()=>[g(" 重置 ")])),_:1}),m(o,{type:"primary",block:"",onClick:ue,style:{width:"49%"}},{default:f((()=>[g(" 查询 ")])),_:1})])])),_:1},512)])),_:1},512)])),_:1}),403===l.value?(r(),v("div",E,[m(x,{image:h(Y),"image-size":"250"},null,8,["image"]),F])):(r(),v("div",L,[m(oe,{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=e=>V.value=e),onRefresh:ee,"success-text":"加载成功","loading-text":"加载中......"},{default:f((()=>[m(w,{loading:X.value},null,8,["loading"]),X.value?k("",!0):(r(),v("div",M,[$.value?(r(),v("div",S,"加载失败，请重试")):(r(),v("div",q,[m(se,{loading:V.value,"onUpdate:loading":t[3]||(t[3]=e=>V.value=e),finished:A.value,offset:50,"finished-text":"",onLoad:ae},{default:f((()=>[(r(!0),v(y,null,z(O.value,((e,a)=>(r(),C(D,{key:a},{default:f((()=>["是"==e.sfwc?(r(),v("div",J)):k("",!0),m(s,{"is-link":"",style:{"margin-top":"10px"},onClick:a=>{return l=e.bianhao,void R.push({path:"/hcfk/check/check_feedback",query:{bh:l}});var l}},{title:f((()=>[m(j,{type:"研判"==e.sjy?"primary":"success"},{default:f((()=>[g(U(e.sjy),1)])),_:2},1032,["type"]),p("span",P,U(e.biaoti),1)])),label:f((()=>[p("div",Q,[W,p("div",null,U(e.xfbm),1)]),p("div",Z,[B,p("div",null,U(e.zzjgmc),1)]),p("div",G,[K,p("div",null,U(e.wanchengshixian),1)])])),_:2},1032,["onClick"])])),_:2},1024)))),128)),A.value?(r(),v("div",N,[m(H,null,{default:f((()=>[g("到底了")])),_:1})])):k("",!0)])),_:1},8,["loading","finished"])]))]))])),_:1},8,["modelValue"])])),m(ce)])}}}),[["__scopeId","data-v-51171d7c"]]))}}}));
