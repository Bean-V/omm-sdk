import{d as E,u as Q,J as Z,f as o,o as n,g as z,h as c,z as l,j as u,t as b,Z as I,n as q,Q as J,ai as W,H as K,p as L,k as Y,_ as $,r as _,T as X,e as ee,C as te,x as ae,ac as se,l as v,W as ne,F as oe,D as le,aj as ie,V as j}from"./index-24b7b5a4.js";import{E as ce}from"./403-7bfaf254.js";const T=t=>(L("data-v-46faad01"),t=t(),Y(),t),ue={class:"cell_custom_title"},de={class:"cell_custom_title"},re=T(()=>u("span",null,"下发单位",-1)),_e={class:"cell_custom_title"},ve=T(()=>u("span",null,"核查单位",-1)),he=E({__name:"hc_list",props:{items:{type:Object,default:()=>{}}},setup(t){const h=Q(),f=Z(),p=t,D=()=>{p.items.qianshoushijian?h.push({path:"/hcfk/feedback/feedback_index",query:{xsbh:p.items.xsbh}}):J({title:"签收提示",message:"是否签收该条信息？"}).then(()=>{W({bianhao:p.items.xsbh,duquren:f.userInfo.name,duqurensfz:f.userInfo.idcard,hechabumdm:f.userInfo.depcode}).then(d=>{d==0&&(K("签收成功，请填写反馈意见"),h.push({path:"/hcfk/feedback/feedback_index",query:{xsbh:p.items.xsbh}}))})}).catch(()=>{})};return(d,i)=>{const e=o("van-tag"),S=o("van-space"),r=o("van-cell"),k=o("van-cell-group");return n(),z(k,{inset:"",style:{"margin-top":"10px"}},{default:c(()=>[l(r,{border:!1,"is-link":"",onClick:i[0]||(i[0]=V=>D())},{title:c(()=>[u("div",ue,[u("span",null,b(t.items.biaoti),1)]),l(S,null,{default:c(()=>[t.items.db=="是"?(n(),z(e,{key:0,type:"success"},{default:c(()=>[I("已盯办")]),_:1})):q("",!0),l(e,{color:t.items.qianshoushijian?"var(--van-orange-dark)":"var(--van-tag-default-color)"},{default:c(()=>[I(b(t.items.qianshoushijian?"已签收":"待签收"),1)]),_:1},8,["color"])]),_:1})]),label:c(()=>[u("div",de,[re,u("div",null,b(t.items.xiafadanwei),1)]),u("div",_e,[ve,u("div",null,b(t.items.hechadanwei),1)])]),_:1}),l(r,{title:"完成时限",value:t.items.wanchengshixian},null,8,["value"]),t.items.qianshoushijian?(n(),z(r,{key:0,title:"签收时间",value:t.items.qianshoushijian},null,8,["value"])):q("",!0)]),_:1})}}});const me=$(he,[["__scopeId","data-v-46faad01"]]),fe=t=>(L("data-v-30343d77"),t=t(),Y(),t),pe={class:"page"},ke={key:0},ge=fe(()=>u("div",{style:{"text-align":"center",color:"var(--el-text-color-secondary)"}},"无权限访问！",-1)),xe={key:1},be={key:0},ye={key:0,class:"error-message"},we={key:1},Ce={key:0,slot:"finished"},y=10,w=1,C=0,ze=E({name:"hcfk_directive_list",__name:"feedback_list",setup(t){const h=_({}),f=_(null),p=[{text:"一般",value:0},{text:"重要",value:1},{text:"紧急",value:2}],D=[{text:"否",value:"b"},{text:"是",value:"c"}];_(p[0].value),_(D[0].value);const d=_(!1),i=_(!1),e=X({size:y,current:w,total:C}),S=ee(()=>e.size*e.current-e.size),r=_([]),k=_(!0),V=_(!1),B=async()=>{e.size=y,e.current=w,e.total=C,i.value=!1,r.value=[],g(h.value.biaoti||null)},H=x=>{e.size=y,e.current=w,e.total=C,i.value=!1,r.value=[],g(x)},M=()=>{e.size=y,e.current=w,e.total=C,i.value=!1,r.value=[],g(h.value.biaoti)};function g(x){d.value=!0,ie({num:e.size,start:S.value,condition:x?"A.biaoti like '%"+x+"%'":"A.biaoti like '%'"}).then(a=>{if(i.value=!0,a.rows&&Array.isArray(a.rows)){const A=a.rows.map(s=>({id:s[0],xsbh:s[1],biaoti:s[2],xiafadanwei:s[4],hechadanwei:s[5],wanchengshixian:s[6]?j(s[6]).format("YYYY-MM-DD HH:mm:ss"):"",qianshoushijian:s[7]?j(s[7]).format("YYYY-MM-DD HH:mm:ss"):"",db:s[8],chuzhileixing:s[9]}));r.value.push(...A),e.current+=1,e.total=a.total,a.total<e.current*e.size&&(i.value=!0)}else a.statusCode==403&&(f.value=a.statusCode)}).catch(a=>{V.value=!0,i.value=!0}).finally(()=>{d.value=!1,k.value=!1})}return te(()=>{g()}),ae(()=>{console.log("页面注销")}),se(()=>{console.log("页面注销")}),(x,a)=>{const A=o("van-search"),s=o("van-sticky"),N=o("van-empty"),R=o("van-skeleton"),U=o("van-divider"),G=o("van-list"),P=o("van-pull-refresh"),F=o("van-back-top");return n(),v("div",pe,[l(s,null,{default:c(()=>[l(A,{modelValue:h.value.biaoti,"onUpdate:modelValue":a[0]||(a[0]=m=>h.value.biaoti=m),"show-action":"",label:"标题",placeholder:"请输入标题关键词",onSearch:H},{action:c(()=>[u("div",{onClick:M},"搜索")]),_:1},8,["modelValue"])]),_:1}),f.value===403?(n(),v("div",ke,[l(N,{image:ne(ce),"image-size":"250"},null,8,["image"]),ge])):(n(),v("div",xe,[l(P,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=m=>d.value=m),onRefresh:B,"success-text":"加载成功","loading-text":"加载中......"},{default:c(()=>[l(R,{loading:k.value},null,8,["loading"]),k.value?q("",!0):(n(),v("div",be,[V.value?(n(),v("div",ye,"加载失败，请重试")):(n(),v("div",we,[l(G,{loading:d.value,"onUpdate:loading":a[1]||(a[1]=m=>d.value=m),finished:i.value,offset:50,"finished-text":"",onLoad:g},{default:c(()=>[(n(!0),v(oe,null,le(r.value,(m,O)=>(n(),z(me,{key:O,items:m},null,8,["items"]))),128)),i.value?(n(),v("div",Ce,[l(U,null,{default:c(()=>[I("到底了")]),_:1})])):q("",!0)]),_:1},8,["loading","finished"])]))]))]),_:1},8,["modelValue"])])),l(F)])}}});const Se=$(ze,[["__scopeId","data-v-30343d77"]]);export{Se as default};
