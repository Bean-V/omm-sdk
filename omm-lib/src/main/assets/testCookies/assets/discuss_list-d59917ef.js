import{d as U,r,T as j,e as H,C as Z,f as n,o as a,l,z as u,W as O,h as i,F as x,D,n as W,aR as J,V as K,H as Q,aS as X,p as $,k as ee,j as m,g as z,Z as R,t as h,_ as te}from"./index-24b7b5a4.js";import{E as ae}from"./403-7bfaf254.js";const se=d=>($("data-v-ca4c3e65"),d=d(),ee(),d),oe={key:0},ne=se(()=>m("div",{style:{"text-align":"center",color:"var(--el-text-color-secondary)"}},"无权限访问！",-1)),le={key:1},ce={key:0},re={key:0,class:"error-message"},ue={key:1},ie={class:"cell_custom_title"},_e={class:"custom-title"},N=10,T=1,q=0,de=U({__name:"discuss_list",setup(d){const C=r(null),V=r(["0"]),f=r([]),_=r(!1),g=r(!1),e=j({size:N,current:T,total:q}),w=H(()=>e.size*e.current-e.size),k=r(!0),E=r(!1),A=async()=>{e.size=N,e.current=T,e.total=q,g.value=!1,f.value=[],S()};function S(){_.value=!0,J({num:e.size,start:w.value}).then(t=>{if(g.value=!0,t.total>0){_.value=!1;const s=t.rows;s.forEach(async(o,v)=>{o.shrq=K(o.shrq).format("YYYY-MM-DD"),o.children=await B(o)}),f.value=s,e.current+=1,e.total=t.total,t.total<e.current*e.size&&(g.value=!0)}else t.statusCode==403?C.value=t.statusCode:Q("未查询到数据")}).catch(t=>{E.value=!0}).finally(()=>{_.value=!1,k.value=!1})}const B=(t,s)=>X({leixing:t.leixing,shrq:t.shrq}).then(v=>v);return Z(()=>{S()}),(t,s)=>{const o=n("van-empty"),v=n("van-skeleton"),b=n("van-tag"),I=n("van-cell"),L=n("van-collapse-item"),G=n("van-collapse"),P=n("van-pull-refresh"),Y=n("van-back-top");return a(),l(x,null,[C.value===403?(a(),l("div",oe,[u(o,{image:O(ae),"image-size":"250"},null,8,["image"]),ne])):(a(),l("div",le,[u(P,{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=c=>_.value=c),onRefresh:A,"success-text":"加载成功","loading-text":"加载中......"},{default:i(()=>[u(v,{loading:k.value},null,8,["loading"]),k.value?W("",!0):(a(),l("div",ce,[E.value?(a(),l("div",re,"加载失败，请重试")):(a(),l("div",ue,[(a(!0),l(x,null,D(f.value,(c,F)=>(a(),z(G,{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=p=>V.value=p)},{default:i(()=>[u(L,{value:c.leixing,name:F},{title:i(()=>[m("div",null,[u(b,{plain:"",round:"",type:"primary"},{default:i(()=>[R(h(c.sl||1),1)]),_:2},1024),m("span",ie,h(c.shrq),1)])]),default:i(()=>{var p;return[((p=c.children)==null?void 0:p.length)==0?(a(),z(o,{key:0,"image-size":"100",description:"未查询到数据"})):(a(!0),l(x,{key:1},D(c.children,(y,M)=>(a(),z(I,{"is-link":"",label:y.sbzzjgmc,to:"/hcfk/check/check_detail?bh="+y.bianhao+"&ShFlag="+!0},{title:i(()=>[u(b,{plain:"",round:"",type:"danger"},{default:i(()=>[R(h(M+1),1)]),_:2},1024),m("span",_e,h(y.biaoti),1)]),_:2},1032,["label","to"]))),256))]}),_:2},1032,["value","name"])]),_:2},1032,["modelValue"]))),256))]))]))]),_:1},8,["modelValue"])])),u(Y)],64)}}});const he=te(de,[["__scopeId","data-v-ca4c3e65"]]);export{he as default};
