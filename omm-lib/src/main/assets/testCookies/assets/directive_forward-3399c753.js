import{u as w}from"./useCheck-4fb33ac8.js";import{d as z,a as V,u as j,J as k,r as m,f as l,o as q,l as C,z as o,h as p,j as D,Z as I}from"./index-24b7b5a4.js";import{m as H}from"./moment-53e63b5e.js";const M={class:"page"},U={style:{padding:"15px 16px"}},P=z({__name:"directive_forward",setup(Y){const h=V(),v=j(),s=k(),{loading:f,addDirectiveHC:_}=w(),n=h.query,i=m([]),u=m(n.zhilingyaoq),d=m(H().format("YYYY-MM-DD HH:mm:ss")),g=()=>{const c=[],a=[],r=i.value.filter(e=>e.value);r.length>0&&r.forEach(e=>{c.push({xsbh:n.xsbh,biaoti:n.biaoti,zhilingyaoq:u.value,xifajgdm:s.userInfo.depcode,xiafabum:s.userInfo.depname,xiafarensfz:s.userInfo.idcard,xiafaren:s.userInfo.name,wanchengshixian:d.value,hechadanweidm:e.value,hechadanw:e.text,jingjizhuangtai:n.jingjizhuangtai,ywjzdm:n.ywjzdm,shifouzhuban:"协办"})}),c.forEach(e=>{a.push(_(e))}),f.value=!0,Promise.all(a).then(e=>{console.log(e),v.back()}).catch(e=>{console.error("提交失败",e)}).finally(()=>{f.value=!1})};return(c,a)=>{const r=l("OrgCascaderMultiple"),e=l("van-cell-group"),x=l("van-field"),b=l("DateTimePicker"),y=l("van-button");return q(),C("div",M,[o(e,{inset:"",style:{"margin-top":"20px"}},{default:p(()=>[o(r,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value=t),label:"转发单位",required:"",placeholder:"请点击选择"},null,8,["modelValue"])]),_:1}),o(e,{inset:"",style:{"margin-top":"20px"}},{default:p(()=>[o(x,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=t=>u.value=t),label:"指令要求","label-align":"top",rows:"8",autosize:"",type:"textarea",maxlength:"800",required:"",placeholder:"请输入内容","show-word-limit":""},null,8,["modelValue"]),o(b,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=t=>d.value=t),required:"",label:"核查时限",placeholder:"请点击选择"},null,8,["modelValue"])]),_:1}),D("div",U,[o(y,{type:"primary",block:"",onClick:g},{default:p(()=>[I(" 指令发送 ")]),_:1})])])}}});export{P as default};
